(()=>{"use strict";const e=document.querySelector(".header"),t=document.querySelector(".logo"),n=document.querySelector(".siteExpl"),a=document.querySelector(".insectFilterBtn"),i=document.querySelector(".navBtns"),o=document.querySelectorAll(".navBtns__btn"),r=document.querySelectorAll(".navBtns__btn__text"),s=()=>{a.remove(),i.remove()},c=[e,t,n,a,i,...o,...r],l=()=>{const e=document.querySelector(".main");if(10>document.documentElement.scrollTop)for(let t of Object.values(c))t.classList.remove("js-headerScrollOn"),e.classList.remove("js-headerScrollOn");else if(!c[0].classList.contains("js-headerScrollOn"))for(let t of Object.values(c))t.classList.add("js-headerScrollOn"),e.classList.add("js-headerScrollOn")},d=/^[a-zA-Z0-9_+-]+(.[a-zA-Z0-9_+-]+)*@([a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]*\.)+[a-zA-Z]{2,}$/,_=/(.*[a-zA-Z])(?=.*[0-9])[a-zA-z0-9]{6,}/,u=(e,t)=>{const n=document.querySelector(".validation__blank");let a=!1;for(let e of t)""===e.value.trim()?(e.classList.add("validationError"),a=!0):e.classList.remove("validationError"),e.addEventListener("input",(()=>{if(""!==e.value.trim()){e.classList.remove("validationError");let a=!0;for(let e of t)""===e.value.trim()&&(a=!1);a&&n.classList.add("hidden")}else e.classList.add("validationError"),n.classList.remove("hidden")}));return a?(n.classList.remove("hidden"),e.preventDefault(),e.stopImmediatePropagation(),!1):(n.classList.add("hidden"),!0)},m=(e,t)=>{const n=document.querySelector(".validation__email");let a=!1;return d.test(t.value.trim())||(a=!0),t.addEventListener("input",(()=>{d.test(t.value.trim())?(t.classList.remove("validationError"),n.classList.add("hidden")):(t.classList.add("validationError"),n.classList.remove("hidden"))})),a?(n.classList.remove("hidden"),t.classList.add("validationError"),t.value="",e.preventDefault(),e.stopImmediatePropagation(),!1):(n.classList.add("hidden"),!0)},p=e=>{e.classList.add("hidden")},v=e=>{e.classList.remove("hidden")},h=document.querySelector(".search__form__cover"),g=document.querySelector(".search__form__close"),L=document.querySelector(".search__form"),f=document.querySelector(".navBtns__btn--searchRecipe"),y=(e,t)=>{document.querySelector("header").insertAdjacentHTML("afterend",'\n    <div class="confirmDialog__cover"></div>\n  '),document.querySelector(e).insertAdjacentHTML("afterend",(e=>`\n    <div class="confirm">\n      <span class="confirm__message">${e}</span>\n      <div class="confirm__btns">\n        <button class="confirm__btns__btn confirm__btns__btn--yes" type="submit">はい</button>\n        <button class="confirm__btns__btn confirm__btns__btn--cancel" type="button">キャンセル</button>\n      </div>\n    </div>\n  `)(t));const n=document.querySelector(".confirm__btns__btn--cancel"),a=document.querySelector(".confirmDialog__cover");n.addEventListener("click",(()=>{document.querySelector(e).nextElementSibling.remove(),a.remove()})),a.addEventListener("click",(()=>{document.querySelector(e).nextElementSibling.remove(),a.remove()}))},b=(e,t)=>{const n=document.querySelectorAll(e);for(let a of n)a.addEventListener("click",(()=>{y(e,t)})),a.addEventListener("submit",(()=>!1))},S=()=>{const e=document.querySelectorAll(".recipeSection");for(let t of e)t.children[0].addEventListener("click",(()=>{location.href=t.dataset.recipeHref})),t.children[1].addEventListener("click",(()=>{location.href=t.dataset.recipeHref})),t.children[2].addEventListener("click",(()=>{location.href=t.dataset.recipeHref}))},E=()=>{const e=document.querySelectorAll(".heartBtn");for(let t of e)t.addEventListener("click",(()=>{const e=t.firstElementChild,n=t.lastElementChild;"heart-outline"==e.name?(e.name="heart",n.textContent=+n.textContent+1):(e.name="heart-outline",n.textContent=+n.textContent-1)}))},q=()=>{const e=document.querySelector(".insectFilterBtn__label"),t=document.querySelectorAll(".recipeImage");e.addEventListener("click",(()=>{for(let e of t)e.classList.toggle("filter")}))},w=(e,t)=>{const[n]=e.target.files;n&&t.setAttribute("src",URL.createObjectURL(n))},A=document.querySelector(".registerRecipe__tags"),k=document.querySelector(".tag__select__list"),x=document.querySelector(".tag__input");let R=1;const $=()=>{R++},I=()=>R,j=()=>x.value,B=e=>{k.classList.toggle("hidden"),e.classList.toggle("open"),e.classList.contains("open")?e.textContent="閉じる":e.textContent="一覧から選ぶ"},C=e=>{A.insertAdjacentHTML("beforeend",(e=>`\n    <span class="registerRecipe__tag" id="tagId_${I()}">\n      <input class="registerRecipe__tag__value" type="hidden" name="tags" value="${e.textContent}" />\n      <span class="registerRecipe__tag__name"><span>#</span>${e.textContent}</span>\n      <button class="registerRecipe__tag__deleteBtn" type="button" data-tag-id="tagId_${I()}">\n        <ion-icon name="trash-outline"></ion-icon>\n      </button>\n    </span>\n  `)(e));const t=A.querySelector(`button[data-tag-id="tagId_${I()}"]`);t.addEventListener("click",(()=>{t.parentNode.remove()})),$()},O=document.querySelector(".registerRecipe__materials__list");let H=1;const z=()=>H,T=()=>{O.insertAdjacentHTML("beforeend",`\n    <li class="material" id="matarialId_${z()}">\n      <input class="material__name" type="text" name="materials" placeholder="材料名" />\n      <input class="material__amount" type="text" name="amounts" placeholder="数量" />\n      <button class="material__deleteBtn" type="button" data-material-id="materialId_${z()}">\n        <ion-icon name="trash-outline"></ion-icon>\n      </button>\n    </li>\n  `);const e=O.querySelector(`button[data-material-id="materialId_${z()}"]`);e.addEventListener("click",(()=>{O.children.length<=1||e.parentNode.remove()})),H++},D=document.querySelector(".registerRecipe__howto__list");let Z=1;const M=()=>Z,P=()=>{D.insertAdjacentHTML("beforeend",`\n    <div class="howto" id="howtoId_${M()}">\n      <div class="howto__action">\n        <span class="howto__num">${D.children.length+1}</span>\n        <button class="howto__deleteBtn" type="button" data-howto-id="howtoId_${M()}">\n          <ion-icon name="trash-outline"></ion-icon>\n        </button>\n      </div>\n      <div class="howto__item">\n        <label class="howto__image__input__label">\n          <span class="howto__image__input__label__text">画像を選択</span>\n          <input class="howto__image__input" type="file" name="procedureImages" accept="image/jpeg,image/png" />\n        </label>\n        <div class="howto__image" style="height: 40px">\n          <img class="howto__image__preview" />\n          <button class="howto__image__deleteBtn hidden" type="button">\n            <ion-icon name="trash-outline"></ion-icon>\n          </button>\n        </div>\n        <textarea class="howto__text" name="contexts" placeholder="作り方を入力"></textarea>\n      </div>\n    </div>\n  `);const e=D.querySelector(`#howtoId_${M()}`);e.querySelector(".howto__deleteBtn").addEventListener("click",(()=>{D.children.length<=1||(e.remove(),(()=>{for(let[e,t]of Object.entries(D.children))t.querySelector(".howto__num").textContent=+e+1})())}));const t=e.querySelector(".howto__image"),n=e.querySelector(".howto__image__input"),a=t.firstElementChild,i=t.lastElementChild;n.addEventListener("change",(()=>{t.style.height="100px",w(event,a),v(i)})),i.addEventListener("click",(()=>{t.style.height="40px",a.src="",n.value="",p(i)})),Z++};f.addEventListener("click",(()=>{v(h),v(L)})),h.addEventListener("click",(()=>{p(h),p(L)})),g.addEventListener("click",(()=>{p(h),p(L)})),["","/","/index","/index.html"].includes(location.pathname)&&((()=>{for(let e of Object.values(c))e.classList.remove("js-headerScrollOn");window.addEventListener("scroll",l)})(),S(),E(),q()),["/login/form","/login"].includes(location.pathname)&&(s(),(()=>{const e=document.querySelector(".login__form"),t=document.querySelectorAll(".form__input");e.addEventListener("submit",(n=>{u(n,t),m(n,e.mail)}))})()),["/signup/form","/signup"].includes(location.pathname)&&(s(),(()=>{const e=document.querySelector(".signup__form"),t=document.querySelectorAll(".form__input");document.querySelector(".signup__form__btn").addEventListener("click",(n=>{u(n,t),((e,t)=>{const n=document.querySelector(".validation__password");let a=!1;_.test(t.value.trim())||(a=!0),t.addEventListener("input",(()=>{_.test(t.value.trim())?(t.classList.remove("validationError"),n.classList.add("hidden")):(t.classList.add("validationError"),n.classList.remove("hidden"))})),a?(n.classList.remove("hidden"),t.classList.add("validationError"),t.value="",e.preventDefault(),e.stopImmediatePropagation()):n.classList.add("hidden")})(n,e.password),((e,t,n)=>{const a=document.querySelector(".validation__confirm");let i=!1;t.value.trim()!==n.value.trim()&&(i=!0),t.addEventListener("input",(()=>{a.classList.add("hidden")})),n.addEventListener("input",(()=>{a.classList.add("hidden")})),i?(a.classList.remove("hidden"),n.classList.add("validationError"),n.value="",e.preventDefault(),e.stopImmediatePropagation()):a.classList.add("hidden")})(n,e.password,e.confirmPassword),m(n,e.mail)}))})(),b(".signup__form__btn","この内容で登録しますか")),["/recipes/register","/recipes/register/form"].includes(location.pathname)&&((()=>{const e=document.querySelector(".registerRecipe__image__input"),t=document.querySelector(".registerRecipe__image__preview");e.addEventListener("change",(()=>{w(event,t)}))})(),(()=>{const e=document.querySelector(".tag__select__btn");e.addEventListener("click",(()=>{B(e)}));const t=k.firstElementChild.children;for(let n of t)n.addEventListener("click",(()=>{C(n),B(e)}));document.querySelector(".tag__addBtn").addEventListener("click",(()=>{(()=>{A.insertAdjacentHTML("beforeend",`\n    <span class="registerRecipe__tag" id="tagId_${I()}">\n      <input class="registerRecipe__tag__value" type="hidden" name="tags" value="${j()}" />\n      <span class="registerRecipe__tag__name"><span>#</span>${j()}</span>\n      <button class="registerRecipe__tag__deleteBtn" type="button" data-tag-id="tagId_${I()}">\n        <ion-icon name="trash-outline"></ion-icon>\n      </button>\n    </span>\n  `);const e=A.querySelector(`button[data-tag-id="tagId_${I()}"]`);e.addEventListener("click",(()=>{e.parentNode.remove()})),x.value="",$()})()}))})(),(()=>{for(let e=0;e<3;e++)T()})(),document.querySelector(".material__addBtn").addEventListener("click",(()=>{T()})),(()=>{for(let e=0;e<2;e++)P()})(),document.querySelector(".howto__addBtn").addEventListener("click",(()=>{P()})),setCheckBlankValidation("registerRecipe"),b(".registerRecipe__submitBtn","この内容で登録しますか")),["/mypage"].includes(location.pathname)&&(setRecipeTabChange(),setAcountSetting(),S(),E(),q(),b(".recipeAction__btn--delete","削除しますか")),/^\/recipes\/[0-9]*$/.test(location.pathname)&&(setRecipeHowtoImage(),E(),q(),b(".recipeDetail__recipeAction__btns__btn--delete","削除しますか"))})();