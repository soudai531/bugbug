(()=>{"use strict";const e=document.querySelector(".header"),t=document.querySelector(".logo"),n=document.querySelector(".siteExpl"),o=document.querySelector(".insectFilterBtn"),c=document.querySelector(".navBtns"),a=document.querySelectorAll(".navBtns__btn"),r=document.querySelectorAll(".navBtns__btn__text"),i=()=>{c.remove(),o.remove()},l=[e,t,n,o,c,...a,...r],s=()=>{const e=document.querySelector(".main");if(10>document.documentElement.scrollTop)for(let t of Object.values(l))t.classList.remove("js-headerScrollOn"),e.classList.remove("js-headerScrollOn");else if(!l[0].classList.contains("js-headerScrollOn"))for(let t of Object.values(l))t.classList.add("js-headerScrollOn"),e.classList.add("js-headerScrollOn")},d=e=>{e.classList.add("hidden")},_=e=>{e.classList.remove("hidden")},u=document.querySelector(".search__form__cover"),m=document.querySelector(".search__form__close"),p=document.querySelector(".search__form"),h=document.querySelector(".navBtns__btn--searchRecipe"),g=(e,t)=>{document.querySelector("header").insertAdjacentHTML("afterend",'\n    <div class="confirmDialog__cover"></div>\n  '),document.querySelector(e).insertAdjacentHTML("afterend",(e=>`\n    <div class="confirm">\n      <span class="confirm__message">${e}</span>\n      <div class="confirm__btns">\n        <button class="confirm__btns__btn confirm__btns__btn--yes" type="submit">はい</button>\n        <button class="confirm__btns__btn confirm__btns__btn--cancel" type="button">キャンセル</button>\n      </div>\n    </div>\n  `)(t));const n=document.querySelector(".confirm__btns__btn--cancel"),o=document.querySelector(".confirmDialog__cover");n.addEventListener("click",(()=>{document.querySelector(e).nextElementSibling.remove(),o.remove()})),o.addEventListener("click",(()=>{document.querySelector(e).nextElementSibling.remove(),o.remove()}))},v=(e,t)=>{const n=document.querySelectorAll(e);for(let o of n)o.addEventListener("click",(()=>g(e,t)))},b=(e,t)=>{const[n]=e.target.files;n&&t.setAttribute("src",URL.createObjectURL(n))},y=document.querySelector(".registerRecipe__tags"),f=document.querySelector(".tag__select__list"),S=document.querySelector(".tag__input");let L=1;const q=()=>{L++},E=()=>L,w=()=>S.value,x=e=>{f.classList.toggle("hidden"),e.classList.toggle("open"),e.classList.contains("open")?e.textContent="閉じる":e.textContent="一覧から選ぶ"},k=e=>{y.insertAdjacentHTML("beforeend",(e=>`\n    <span class="registerRecipe__tag" id="tagId_${E()}">\n      <input class="registerRecipe__tag__value" type="hidden" name="tags" value="${e.textContent}" />\n      <span class="registerRecipe__tag__name"><span>#</span>${e.textContent}</span>\n      <button class="registerRecipe__tag__deleteBtn" type="button" data-tag-id="tagId_${E()}">\n        <ion-icon name="trash-outline"></ion-icon>\n      </button>\n    </span>\n  `)(e));const t=y.querySelector(`button[data-tag-id="tagId_${E()}"]`);t.addEventListener("click",(()=>{t.parentNode.remove()})),q()},j=document.querySelector(".registerRecipe__materials__list");let $=1;const B=()=>$,R=()=>{j.insertAdjacentHTML("beforeend",`\n    <li class="material" id="matarialId_${B()}">\n      <input class="material__name" type="text" name="materials" placeholder="材料名" />\n      <input class="material__amount" type="text" name="amounts" placeholder="数量" />\n      <button class="material__deleteBtn" type="button" data-material-id="materialId_${B()}">\n        <ion-icon name="trash-outline"></ion-icon>\n      </button>\n    </li>\n  `);const e=j.querySelector(`button[data-material-id="materialId_${B()}"]`);e.addEventListener("click",(()=>{j.children.length<=1||e.parentNode.remove()})),$++},C=document.querySelector(".registerRecipe__howto__list");let I=1;const A=()=>I,O=()=>{C.insertAdjacentHTML("beforeend",`\n    <div class="howto" id="howtoId_${A()}">\n      <div class="howto__action">\n        <span class="howto__num">${C.children.length+1}</span>\n        <button class="howto__deleteBtn" type="button" data-howto-id="howtoId_${A()}">\n          <ion-icon name="trash-outline"></ion-icon>\n        </button>\n      </div>\n      <div class="howto__item">\n        <label class="howto__image__input__label">\n          <span class="howto__image__input__label__text">画像を選択</span>\n          <input class="howto__image__input" type="file" name="procedureImages" accept="image/jpeg,image/png" />\n        </label>\n        <div class="howto__image" style="height: 40px">\n          <img class="howto__image__preview" />\n          <button class="howto__image__deleteBtn hidden" type="button">\n            <ion-icon name="trash-outline"></ion-icon>\n          </button>\n        </div>\n        <textarea class="howto__text" name="contexts" placeholder="作り方を入力"></textarea>\n      </div>\n    </div>\n  `);const e=C.querySelector(`#howtoId_${A()}`);e.querySelector(".howto__deleteBtn").addEventListener("click",(()=>{C.children.length<=1||(e.remove(),(()=>{for(let[e,t]of Object.entries(C.children))t.querySelector(".howto__num").textContent=+e+1})())}));const t=e.querySelector(".howto__image"),n=e.querySelector(".howto__image__input"),o=t.firstElementChild,c=t.lastElementChild;n.addEventListener("change",(()=>{t.style.height="100px",b(event,o),_(c)})),c.addEventListener("click",(()=>{t.style.height="40px",o.src="",n.value="",d(c)})),I++};h.addEventListener("click",(()=>{_(u),_(p)})),u.addEventListener("click",(()=>{d(u),d(p)})),m.addEventListener("click",(()=>{d(u),d(p)})),["","/","/index","/index.html"].includes(location.pathname)&&((()=>{for(let e of Object.values(l))e.classList.remove("js-headerScrollOn");window.addEventListener("scroll",s)})(),(()=>{const e=document.querySelectorAll(".recipeSection");for(let t of e)t.children[0].addEventListener("click",(()=>{location.href=t.dataset.recipeHref})),t.children[1].addEventListener("click",(()=>{location.href=t.dataset.recipeHref})),t.children[2].addEventListener("click",(()=>{location.href=t.dataset.recipeHref}))})(),(()=>{const e=document.querySelectorAll(".heartBtn");for(let t of e)t.addEventListener("click",(()=>{const e=t.firstElementChild,n=t.lastElementChild;"heart-outline"==e.name?(e.name="heart",n.textContent=+n.textContent+1):(e.name="heart-outline",n.textContent=+n.textContent-1)}))})(),(()=>{const e=document.querySelector(".insectFilterBtn__label"),t=document.querySelectorAll(".recipeImage");e.addEventListener("click",(()=>{for(let e of t)e.classList.toggle("filter")}))})()),["/login/form","/login"].includes(location.pathname)&&i(),["/signup/form","/signup"].includes(location.pathname)&&(i(),v(".signup__form__btn","この内容で登録しますか")),["/recipes/register/form"].includes(location.pathname)&&((()=>{const e=document.querySelector(".registerRecipe__image__input"),t=document.querySelector(".registerRecipe__image__preview");e.addEventListener("change",(()=>{b(event,t)}))})(),(()=>{const e=document.querySelector(".tag__select__btn");e.addEventListener("click",(()=>{x(e)}));const t=f.firstElementChild.children;for(let n of t)n.addEventListener("click",(()=>{k(n),x(e)}));document.querySelector(".tag__addBtn").addEventListener("click",(()=>{(()=>{y.insertAdjacentHTML("beforeend",`\n    <span class="registerRecipe__tag" id="tagId_${E()}">\n      <input class="registerRecipe__tag__value" type="hidden" name="tags" value="${w()}" />\n      <span class="registerRecipe__tag__name"><span>#</span>${w()}</span>\n      <button class="registerRecipe__tag__deleteBtn" type="button" data-tag-id="tagId_${E()}">\n        <ion-icon name="trash-outline"></ion-icon>\n      </button>\n    </span>\n  `);const e=y.querySelector(`button[data-tag-id="tagId_${E()}"]`);e.addEventListener("click",(()=>{e.parentNode.remove()})),S.value="",q()})()}))})(),(()=>{for(let e=0;e<3;e++)R()})(),document.querySelector(".material__addBtn").addEventListener("click",(()=>{R()})),(()=>{for(let e=0;e<2;e++)O()})(),document.querySelector(".howto__addBtn").addEventListener("click",(()=>{O()})),v(".registerRecipe__submitBtn","この内容で登録しますか"))})();