<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>bugbug</title>
    <link rel="icon" th:href="@{/img/logoicon.png}" />
    <link rel="preload" th:href="@{/img/header.jpeg}" as="image" />
    <link rel="preload" th:href="@{/img/footer.jpg}" as="image" />
    <!-- 共通CSS -->
    <link rel="stylesheet" th:href="@{/css/style.css}" />
    <!-- 各ページCSS -->
    <link rel="stylesheet" th:href="@{/css/index.css}" />
</head>

<body>
    <header th:replace="header"></header>
    <!-- メインコンテンツ -->
    <main class="main">
        <section class="popRecipe">
            <div class="popRecipe__title">
                <span class="popRecipe__title__text">人気のレシピ</span>
            </div>
            <!-- レシピ一覧 -->
            <section class="popRecipe__list">
                <!-- レシピ -->
                <th:block th:if="${!#lists.isEmpty(recipes)}" th:each="recipe : ${recipes}">
                    <section th:href="|/recipes/${recipe.recipeId}|" class="popRecipe__list__item">
                        <div class="popRecipe__list__item__img">
                            <img img th:src="|/images/recipe-images/${recipe.recipeImage}|" alt="レシピ画像" />
                        </div>
                        <div class="popRecipe__list__item__recipeName">
                            <span>[[${recipe.recipeName}]]</span>
                        </div>
                        <div class="popRecipe__list__item__tags">
                            <th:block th:each="tag : ${recipe.tags}">
                                <a class="popRecipe__list__item__tag" th:href="|/serch?tag=${tag.tagId}|">
                                    <span th:data-url="|/serch?tag=${tag.tagId}|" class="popRecipe__list__item__tag__name"><span>#</span>[[${tag.name}]]</span>
                                </a>
                            </th:block>
                        </div>
                        <div class="popRecipe__list__item__userAction" th:data-url="|/users/${recipe.postUserId}|">
                            <a class="popRecipe__list__item__user" th:href="|/users/${recipe.postUserId}|">
                                <span class="popRecipe__list__item__user__icon">
                    <img th:src="|/images/user-icons/${recipe.postUserImage}|" alt="ユーザーアイコン" />
                  </span>
                                <span class="popRecipe__list__item__user__name">[[${recipe.postUserName}]]</span>
                            </a>
                            <div class="heartBtn">
                                <form th:action="|/recipe/favorite/add/${recipe.recipeId}|" method="post"></form>
                                <ion-icon name="heart-outline"></ion-icon>
                                <span class="heartNum">[[${recipe.favoriteNumber}]]</span>
                                </form>
                            </div>
                        </div>
                    </section>
                </th:block>
            </section>
        </section>
    </main>
    <footer th:replace="footer"></footer>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <script th:src="@{/js/main.js}"></script>
</body>

</html>